<?php
/**
 * Histórico Proposta Pedagógica
 * @author emanuel.sampaio <emanuelonline@gmail.com>
 * @since 24/04/2012
 * @version 1.0
 * @package application
 * @subpackage application.views.scripts.readequacao
 * @copyright © 2012 - Ministério da Cultura - Todos os direitos reservados.
 * @link http://salic.cultura.gov.br
 */

$dados = $this->dados;
?>



<table class="tabela" summary="Histórico">
    <tr>
        <td><input type="button" name="grid-proposta-pedagogica" id="g1-proposta-pedagogica" class="btn_adicionar" title="Expandir" /> <strong>Hist&oacute;rico de Solicita&ccedil;&atilde;o de Readequa&ccedil;&atilde;o - Proposta Pedag&oacute;gica</strong></td>
    </tr>
</table>

<div id="div_g1-proposta-pedagogica" class="miolo_grid_01 sumir">
    <?php if (isset($dados['idPedidoAlteracao'])) : ?>
    <table class="tabela">
        <tr class="destacar bold" align="center">
            <td width="10%">Solicita&ccedil;&atilde;o</td>
            <td width="10%">Data Solicita&ccedil;&atilde;o</td>
            <td width="40%">Especifica&ccedil;&atilde;o T&eacute;cnica</td>
            <td width="10%">Outras Informa&ccedil;&otilde;es</td>
            <td width="10%">Justificativa Proponente</td>
            <td width="10%">Data Avalia&ccedil;&atilde;o</td>
            <td width="10%">Avalia&ccedil;&atilde;o MinC</td>
            <td width="10%">Justificativa MinC</td>
        </tr>

            <?php for ($i = 0; $i < count($dados['idPedidoAlteracao']); $i++) : ?>
        <tr class="fundo_linha<?php echo ($i % 2 == 0) ? 1 : 2; ?>">
            <td align="center"><?php echo $dados['item'][$i]; ?></td>
            <td align="center"><?php echo $dados['dtSolicitacao'][$i]; ?></td>
            <td align="center">
                <a href="javascript:alertModal('Especifica&ccedil;&atilde;o T&eacute;cnica', 'dsEspecificacaoTecnica06<?php echo $dados['item'][$i]; ?>', 580, 360);" title="Visualizar Especifica&ccedil;&atilde;o Tecnica"><img src="<?php echo $this->baseUrl(); ?>/public/img/edit_ico.gif" alt="Visualizar anexos" /></a>
                <div id="dsEspecificacaoTecnica06<?php echo $dados['item'][$i]; ?>" class="sumir">
                    <table class="tabela">
                        <tr>
                            <th>Especifica&ccedil;&atilde;o T&eacute;cnica</th>
                        </tr>
                        <tr>
                            <td><?php echo $dados['dsEspecificacaoTecnica'][$i]; ?></td>
                        </tr>
                    </table>
                </div>
            </td>
            <td align="center">
                <a href="javascript:alertModal('Estrategia de Execu&ccedil;&atilde;o', 'dsEstrategiaExecucao06<?php echo $dados['item'][$i]; ?>', 580, 360);" title="Visualizar Estrategia de Execu&ccedil;&atilde;o"><img src="<?php echo $this->baseUrl(); ?>/public/img/edit_ico.gif" alt="Visualizar anexos" /></a>
                <div id="dsEstrategiaExecucao06<?php echo $dados['item'][$i]; ?>" class="sumir">
                    <table class="tabela">
                        <tr>
                            <th>Estrategia de Execu&ccedil;&atilde;o</th>
                        </tr>
                        <tr>
                            <td><?php echo $dados['dsEstrategiaExecucao'][$i]; ?></td>
                        </tr>
                    </table>
                </div>
            </td>
            <td align="center">
                <a href="javascript:alertModal('Justificativa Proponente', 'dsProponente06<?php echo $dados['item'][$i]; ?>', 580, 360);" title="Visualizar justificativa"><img src="<?php echo $this->baseUrl(); ?>/public/img/edit_ico.gif" alt="Visualizar anexos" /></a>
                <div id="dsProponente06<?php echo $dados['item'][$i]; ?>" class="sumir">
                    <table class="tabela">
                        <tr>
                            <th>Justificativa Proponente</th>
                        </tr>
                        <tr>
                            <td><?php echo $dados['dsProponente'][$i]; ?></td>
                        </tr>
                    </table>
                </div>
            </td>
            <td align="center"><?php echo $dados['dtFimAvaliacao'][$i]; ?></td>
            <td align="center" class="<?php echo $dados['stAvaliacao'][$i] == 'AP' ? 'green' : 'red' ?>"><?php echo $dados['stAvaliacao'][$i] == 'AP' ? 'Aprovado' : 'Indeferido' ?></td>
            <td align="center">
                <a href="javascript:alertModal('Justificativa MinC', 'dsMinc06<?php echo $dados['item'][$i]; ?>', 580, 360);" title="Visualizar justificativa"><img src="<?php echo $this->baseUrl(); ?>/public/img/edit_ico.gif" alt="Visualizar anexos" /></a>
                <div id="dsMinc06<?php echo $dados['item'][$i]; ?>" class="sumir">
                    <table class="tabela">
                        <tr>
                            <th>Justificativa MinC</th>
                        </tr>
                        <tr>
                            <td><?php echo $dados['dsAvaliacao'][$i]; ?></td>
                        </tr>
                    </table>
                </div>
            </td>
        </tr>
        <?php endfor; ?>

    </table>

    <?php else : ?>
    <table class="tabela">
        <tr>
            <td align="center">N&atilde;o existe hist&oacute;rico de solicita&ccedil;&atilde;o de readequa&ccedil;&atilde;o para esse item.</td>
        </tr>
    </table>
    <?php endif; ?>
</div>



<script type="text/javascript">
    <!--
    /**
     * Função para abrir e fechar a grid
     */
    function grid_proposta_pedagogica(elemento)
    {
        if ( $('#' + elemento).attr('class') == 'btn_adicionar' )
        {
            $('#' + elemento).removeClass('btn_adicionar');
            $('#' + elemento).addClass('btn_remover');
            $('#' + elemento).attr({title:'Recolher'});
        }
        else
        {
            $('#' + elemento).removeClass('btn_remover');
            $('#' + elemento).addClass('btn_adicionar');
            $('#' + elemento).attr({title:'Expandir'});
        }
        $('#div_' + elemento).toggle('slow');
    } // fecha função grid_proposta_pedagogica()

    /**
     * Ações que serão executadas após o carregamento da página
     */
    $(document).ready(function()
    {
        $('input[name=grid-proposta-pedagogica]').click(function()
        {
            grid_proposta_pedagogica(this.id);return false;
        });
    });
    //-->
</script>
<link rel="stylesheet" type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.1.0/material.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.13/css/dataTables.material.min.css"/>
<main>
    <nav class="breadcrumb">
        <div class="nav-wrapper" style="padding: 0 15px 0 15px">
            <div class="col s12">
                <a href="<?php echo $this->url(array('module' => 'admissibilidade', 'controller' => 'gerenciarparecer', 'action' => 'index'), null, true); ?>"
                   class="breadcrumb tooltipped"
                   data-position="top"
                   data-delay="50"
                   data-tooltip="Ir para In&iacute;cio">In&iacute;cio</a>

                <a href="#"
                   class="breadcrumb tooltipped"
                   data-position="top"
                   data-delay="50"
                   data-tooltip="Gerenciar Enquadramentos">Gerenciar Enquadramento</a>
            </div>
        </div>
    </nav>
    <div class="content">
        <div class="row">
            <div class="col s12">
                <table class="bordered responsive-table" id="enquadramento">
                    <thead>
                    <tr class="titulo_tabela">
                        <th width="40">PRONAC</th>
                        <th>Nome do Projeto</th>
                        <th>&Aacute;rea</th>
                        <th>Segmento</th>
                        <th>Data</th>
                        <?php if ($this->codGrupo == Autenticacao_Model_Grupos::COORDENADOR_ADMISSIBILIDADE): ?>
                            <th>T&eacute;cnico</th>
                        <?php endif; ?>
                        <th align="center">A&ccedil;&atilde;o</th>
                    </tr>
                    </thead>
                    <tbody>
                    <?php foreach ($this->dados as $dado): ?>
                        <?php if ($dado->Situacao == "B03") : ?>
                            <tr class="amber lighten-4">
                        <?php else: ?>
                            <tr>
                        <?php endif; ?>
                        <td>
                            <a class="blue-text"
                                href="<?php echo $this->url(array('module' => 'default', 'controller' => 'consultardadosprojeto', 'action' => 'index')) . "?idPronac={$dado->IdPRONAC}"; ?>"><u><?php echo $dado->pronac; ?></u></a>
                        </td>
                        <td><?php echo $dado->nomeProjeto; ?></td>
                        <td><?php echo $dado->area; ?></td>
                        <td><?php echo $dado->segmento; ?></td>
                        <td><?php echo Data::tratarDataZend($dado->DtSituacao, 'Brasileira'); ?></td>
                        <?php if ($this->codGrupo == Autenticacao_Model_Grupos::COORDENADOR_ADMISSIBILIDADE): ?>
                            <td><?php echo (trim($dado->usu_nome) != "") ? $dado->usu_nome : '-' ?></td>
                        <?php endif; ?>
                        <td>
                            <?php
                            $corMensagem = 'green';
                            if ($dado->mensagens_nao_respondidas == '0' && $dado->mensagens_respondidas == '0') {
                                $corMensagem = 'blue';
                            } elseif ($dado->mensagens_nao_respondidas <> $dado->mensagens_respondidas) {
                                $corMensagem = 'amber darken-1';
                            }
                            ?>
                            <a class="btn waves-effect waves-light tooltipped small <?php echo $corMensagem; ?>"
                               href="<?php echo $this->url(array('module' => 'admissibilidade', 'controller' => 'mensagem', 'action' => 'index')) . "?IdPronac={$dado->idpronac}"; ?>"
                               data-position="top" data-delay="50" data-tooltip="D&uacute;vida">
                                <i class="material-icons white-text">&#xE0BF;</i>
                            </a>
                            <a class="btn waves-effect waves-light cyan tooltipped small"
                               href="<?php echo $this->url(array('module' => 'admissibilidade', 'controller' => 'enquadramento', 'action' => 'enquadrarprojeto')) . "?IdPRONAC={$dado->idpronac}" ?>"
                               data-position="top" data-delay="50" data-tooltip="Enquadrar">
                                <i class="material-icons white-text darken-4">&#xE869;</i>
                            </a>
                        </td>
                        </tr>
                    <?php endforeach; ?>
                    </tbody>
                </table>
                <div class="col s12 m6 l4">
                    <label>Legenda:</label>
                    <br />
                    <div class="amber lighten-4" style="border: 1px solid gray; height: 20px; display: inline">&nbsp;&nbsp;&nbsp;&nbsp;</div>
                    Projeto Enquadrado Com Recurso
                    <br clear="both" />
                    <div class="" style="border: 1px solid gray; height: 20px; display: inline">&nbsp;&nbsp;&nbsp;&nbsp;</div>
                    Projeto Para Enquadrado
                </div>
            </div>
        </div>
    </div>
    <br clear="all"/>
    <script
        src="https://code.jquery.com/jquery-1.12.4.js"
        integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="
        crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.12/datatables.min.js"></script></script>
    <script
    type = "text/javascript"
    src = "https://cdn.datatables.net/1.10.13/js/dataTables.material.min.js" ></script></script>

    <script
    type = "text/javascript" >
        (function ($) {

            $(document).ready(function () {
                $('#enquadramento').DataTable(
                    {
                        "language": {
                            "url": "https://cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"
                        }
                        , "order": [0, 1]
                        , "searching": true
                        , "lengthChange": true
                        , columnDefs: [
                        {
                            targets: [0, 1],
                            className: 'mdl-data-table__cell--non-numeric'
                        }
                    ]
                        ,
                        "aoColumnDefs": [
                            {'bSortable': false, 'aTargets': [4]}
                        ]
                    });
            });
        }($.noConflict(true)));
    </script>

</main>